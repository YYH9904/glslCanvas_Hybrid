<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<title>Hybrid Image — Mouse Reveal (Tone Blend Final)</title>
<script src="dist/GlslCanvas.js"></script>
<style>
  html, body { margin:0; height:100%; background:#0e1316; display:flex; justify-content:center; align-items:center; }
  #glslCanvas { width: min(90vmin, 900px); height: min(90vmin, 900px); display:block; }
  .hint { position:fixed; bottom:18px; left:50%; transform:translateX(-50%); font:14px system-ui; color:#c9d4e0; opacity:.7; }
</style>
</head>
<body>
<canvas id="glslCanvas"
  width="800" height="800"
  data-fragment-url="Hybrid_Waves_Rice_MouseReveal_ToneBlend.frag?v=1"
  data-textures="data/Wavesv2_byChatGPT.png, data/Ricev3_byChatGPT.png">
</canvas>
<div class="hint">滑鼠中心顯示近距離細節（遠景維持藍色基底）</div>

<script>
const canvas = document.getElementById("glslCanvas");
const sandbox = new GlslCanvas(canvas);

// 初始暖色強度，可試 0.5 ~ 1.0
sandbox.setUniform("u_tintWarm", 0.5);

// 稻的彩色高頻混合量：0=灰階細節、1=完整彩色高頻
// 建議先從 0.35~0.6 嘗試，避免色彩太花
sandbox.setUniform("u_riceColorMix", 0.5);


// 初始化滑鼠在中心（像素座標）
function initMouse(){
  sandbox.setUniform("u_mouse", [canvas.width * 0.5, canvas.height * 0.5]);
}
initMouse();

// 滑鼠移動事件（傳像素座標）
canvas.addEventListener("mousemove", (e)=>{
  const rect = canvas.getBoundingClientRect();
  const x = (e.clientX - rect.left) * (canvas.width / rect.width);
  const y = (rect.height - (e.clientY - rect.top)) * (canvas.height / rect.height);
  sandbox.setUniform("u_mouse", [x, y]);
});

window.addEventListener("resize", initMouse);
</script>
</body>
</html>
